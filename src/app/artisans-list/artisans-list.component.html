<h2 class="mb-4">Liste des artisans</h2>

<!-- Filtres -->
<div class="mb-4 row align-items-center">
  <label for="category" class="col-sm-2 col-form-label">Catégorie :</label>
  <div class="col-sm-4">
    <select class="form-select" [(ngModel)]="selectedCategory" id="category">
      <option value="Tous">Tous</option>
      <option value="Bâtiment">Bâtiment</option>
      <option value="Fabrication">Fabrication</option>
      <option value="Services">Services</option>
      <option value="Alimentation">Alimentation</option>
    </select>
  </div>
</div>

<!-- Liste des artisans filtrés -->
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  <div *ngFor="let artisan of artisans | categoryFilter:selectedCategory"
       class="col">
    <div class="card h-100 artisan-card" (click)="goToDetail(artisan.id)" style="cursor: pointer;">
      <div class="card-body">
        <h5 class="card-title">{{ artisan.name }}</h5>

        <!-- Affichage des étoiles -->
        <div class="text-warning mb-2">
          <ng-container *ngFor="let star of getStarsArray(artisan.note); let i = index">
            <i class="bi" [ngClass]="{
              'bi-star-fill': i < Math.floor(artisan.note),
              'bi-star-half': i >= Math.floor(artisan.note) && i < artisan.note,
              'bi-star': i >= artisan.note
            }"></i>
          </ng-container>
        </div>

        <p class="card-text"><strong>Spécialité :</strong> {{ artisan.specialty }}</p>
        <p class="card-text"><strong>Ville :</strong> {{ artisan.location }}</p>
      </div>
    </div>
  </div>
</div>
